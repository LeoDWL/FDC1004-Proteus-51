C51 COMPILER V9.59.0.0   MAIN                                                              04/07/2022 16:25:20 PAGE 1   


C51 COMPILER V9.59.0.0, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN .\Objects\main.obj
COMPILER INVOKED BY: D:\keil5\C51\BIN\C51.EXE main.c OPTIMIZE(8,SPEED) BROWSE INCDIR(.\Hardware\src;.\Hardware\inc) DEBU
                    -G OBJECTEXTEND PRINT(.\Listings\main.lst) OBJECT(.\Objects\main.obj)

line level    source

   1          #include <reg52.h>
   2          #include "LCD12864.h"
   3          #include "delay.h"
   4          #include "i2c.h"
   5          #include "FDC1004.h"
   6          
   7          //参数定义
   8          unsigned long Cap1 = 0;
   9          unsigned long Cap2 = 0;
  10          unsigned long Cap3 = 0;
  11          unsigned long Cap4 = 0;
  12          unsigned int Cap = 0;
  13          unsigned long int CC = 0;
  14          unsigned int Gain1 = 0;
  15          unsigned int M_ID = 12;
  16          unsigned int D_ID = 0;
  17          
  18          void main(void)
  19          {
  20   1          InitLCD();    //初始化LCD12864
  21   1          digplaystart();
  22   1          delay5ms();//保持稳定
  23   1          ClearScreen(1);
  24   1          ClearScreen(2);
  25   1      
  26   1          ShowChina(0,8,4);//原
  27   1          ShowChina(0,24,5);//油
  28   1          ShowChina(0,40,6);//含
  29   1          ShowChina(0,56,7);//水
  30   1          ShowChina(0,72,8);//率
  31   1          ShowChina(0,88,9);//检
  32   1          ShowChina(0,104,10);//测
  33   1          ShowChina(3,0,11);//电
  34   1          ShowChina(3,16,12);//容
  35   1          //ShowChina(3,32,13);//容
  36   1          //ShowChina(3,48,14);//值
  37   1          ShowChina(3,32,15);//:
  38   1          ShowChina(6,0,6);//含
  39   1          ShowChina(6,16,7);//水
  40   1          ShowChina(6,32,8);//率
  41   1          ShowChina(6,48,15);//:
  42   1          M_ID = ReadID_FDC1004(0xFE);
  43   1          D_ID = ReadID_FDC1004(0xFF);
  44   1          M_ID = 12;
  45   1          Config_FDC1004_Single(0x1C00,0x08);//配置FDC1004电容通道1单端测量
  46   1          Config_FDC1004_Single(0x3C00,0x09);//配置FDC1004电容通道2单端测量
  47   1          Config_FDC1004_Single(0x5C00,0x0A);//配置FDC1004电容通道3单端测量
  48   1          Config_FDC1004_Single(0x7C00,0x0B);//配置FDC1004电容通道4单端测量
  49   1          Triggering_FDC1004(0x0C);//触发测量
  50   1          WaitFor_FDC1004(0x0C);
  51   1          Cap1 = ReadData_FDC1004(0x00);//读取电容值
  52   1          Cap2 = ReadData_FDC1004(0x02);//读取电容值
  53   1          Cap3 = ReadData_FDC1004(0x04);//读取电容值
  54   1          Cap4 = ReadData_FDC1004(0x06);//读取电容值
C51 COMPILER V9.59.0.0   MAIN                                                              04/07/2022 16:25:20 PAGE 2   

  55   1          while(1)
  56   1          {
  57   2              WaitFor_FDC1004(0x0C);
  58   2              Cap1 = ReadData_FDC1004(0x00);//读取电容通道1电容值
  59   2              Cap2 = ReadData_FDC1004(0x02);//读取电容通道1电容值
  60   2              Cap3 = ReadData_FDC1004(0x04);//读取电容通道1电容值
  61   2              Cap4 = ReadData_FDC1004(0x06);//读取电容通道1电容值
  62   2              Cap = (Cap1+Cap2+Cap3+Cap4)/4;//可用于测量四个通道的平均值
  63   2              Cap_Cac_Diplay(3,48,Cap2);//电容容值计算并显示
  64   2              Moisture_Cac_Diplay(6,56,Cap2);//含水率计算并显示，根据电容大小，拟合得到含水率的数值并显示
  65   2          }
  66   1      }                                                                                                    
  67          
  68          //void main(void)
  69          //{
  70          
  71          //    Cap = 0;
  72          //    CC = 0;
  73          //    delay_ms(200);
  74          //    M_ID = ReadID_FDC1004(0xFE);
  75          //    D_ID = ReadID_FDC1004(0xFF);
  76          //    Config_FDC1004(4,0x08);//配置FDC1004
  77          //    Triggering_FDC1004(0x0C);//触发测量
  78          //    WaitFor_FDC1004(0x0C);
  79          //    Cap1 = ReadData_FDC1004(0x00);//读取电容值
  80          //    Cap2 = ReadData_FDC1004(0x02);//读取电容值
  81          //    Cap3 = ReadData_FDC1004(0x04);//读取电容值
  82          //    Cap4 = ReadData_FDC1004(0x06);//读取电容值
  83          
  84          //    while(1)
  85          //    {
  86          //        WaitFor_FDC1004(0x0C);
  87          //        Cap1 = ReadData_FDC1004(0x00);//读取电容值
  88          //        Cap2 = ReadData_FDC1004(0x02);//读取电容值
  89          //        Cap3 = ReadData_FDC1004(0x04);//读取电容值
  90          //        Cap4 = ReadData_FDC1004(0x06);//读取电容值
  91          //        Cap = (Cap1+Cap2+Cap3+Cap4)/4;
  92          
  93          //        if(Test_Flag==1)
  94          //        {
  95          //            Test_Flag=0;
  96          //            WaitFor_FDC1004(0x0C);
  97          //            Cap1 = ReadData_FDC1004(0x00);//读取电容值
  98          //            Cap2 = ReadData_FDC1004(0x02);//读取电容值
  99          //            Cap3 = ReadData_FDC1004(0x04);//读取电容值
 100          //            Cap4 = ReadData_FDC1004(0x06);//读取电容值
 101          //            Cap = (Cap1+Cap2+Cap3+Cap4)/4;
 102          //            CC += Cap;
 103          
 104          //            Time_Cnt++;
 105          //            if(Time_Cnt>=5)
 106          //            {
 107          //                Time_Cnt=0;
 108          //                CC = CC/5;
 109          //                CC=0;
 110          //            }
 111          //        }
 112          //    }
 113          //}


MODULE INFORMATION:   STATIC OVERLAYABLE
C51 COMPILER V9.59.0.0   MAIN                                                              04/07/2022 16:25:20 PAGE 3   

   CODE SIZE        =    430    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =     28    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
